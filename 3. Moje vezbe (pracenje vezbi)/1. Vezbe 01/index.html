<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>

    /*
        1. primer for / var
    */
    var boje=['red', 'green', 'blue'];

    boje.forEach(function(boja){console.log(boja);});

    console.log('------------------Sledeci primer------------------');

    var numbers=[1,2,3,4,5];
    var sum=0;
    /*
    numbers.forEach(function(num){sum+=num;});
    console.log(sum);
    */
    console.log('Varijacija prethodnog primera');


    numbers.forEach(adder);//adder dodje kao refernca na funkciju adder definisanu dole

    console.log(sum);

    function adder(number){//iako je adder funkcija definisana nakon foreach funkcije
        //koristi, ovo funkcionise zbog asinhrone prirode javascripta (don't know any more details)
        sum+=number;
    }

    /*
        4. primer - push
    */

    var numbers=[1,2,3];
    var doubledNumbers=[];

    //pravimo petlju tako da svaki element numbers niza mnozimo sa dva

    for(var i=0;i<numbers.length;i++){

        doubledNumbers.push(numbers[i]*2);
    }
    console.log(numbers);
    console.log(doubledNumbers);


    console.log('-----------------TypeScript-----------------');
    var numbers=[1,2,3];
    var doubledNumbers=[];

    numbers.forEach(number=>doubledNumbers.push(number*2));


    console.log(doubledNumbers);



    var numbers=[1,2,3];
    var doubledNumbers=[];
    numbers.forEach(function(number){doubledNumbers.push(number*2);});
    console.log('------------------Sledeci primer------------------');


    /*
    5. primer

    forEach helper - map()
    - pravi novi niz
    */

    //pozivamo nad gore definisanim numbers nizom, numbers=[1,2,3]
    var doubled=numbers.map(function(number){
        return number*2;
    })
    console.log(doubled);
    console.log('------------------Sledeci primer------------------');

    /*
        6. primer
        map()
    */
    //automobili je niz objekata
    var automobili=[
        {model:'jugo',cena:'skup'},//ovo je objekat
        {model:'audi',cena:'jeftin'}
    ]
    //funkcija ispod vraca samo cene iz objekata niza automobili
    var cene=automobili.map(function(automobil){
        return automobil.cena;
    })
    console.log(cene);
    console.log('------------------Sledeci primer------------------');


    /*
        7. primer
        forEach helper - filter()
    */
    var proizvodi=[
        {ime: 'lopta', tip: 'sport'},
        {ime: 'film', tip: 'zabava'},
        {ime: 'klikeri', tip: 'sport'},
        {ime: 'muzika', tip: 'zabava'},
    ];
    
    // odavde sada nadole radimo vanila js
    var filtrirajProizvode=[];

    for(var i=0; i<proizvodi.length;i++){
        if(proizvodi[i].tip==='zabava')
            filtrirajProizvode.push(proizvodi[i]);
      
    }
    console.log(filtrirajProizvode);
    console.log('------------------Sledeci primer------------------');

    //odavde nadole ide isti metod, ali pomocu TypeScript-a
    /*
    let filtrirani=proizvodi.filter(function(proizvod){
       return proizvod.tip==='zabava';
    });
    */
    let filtrirani=proizvodi.filter(proizvod=>proizvod.tip==='zabava');
    console.log(filtrirani);
    console.log('------------------Sledeci primer------------------');

    /*
        8. primer
        filter prema ceni i kvalitetu proizvoda
    */
    var proizvodi=[
        {ime: 'lopta', tip:'sport', cena: 0, kvalitet: 2},
        {ime: 'film', tip: 'zabava', cena: 10, kvalitet: 25},
        {ime: 'klikeri', tip: 'sport', cena: 20, kvalitet: 12},
        {ime: 'muzika', tip: 'zabava', cena: 5, kvalitet: 3}
    ];

    /*
    opis zadatka:
        -tip je sport, kvalitet veci od 0, cena manja od 15 
        -filter()
        -return je potreban za filter(), isto kao i za map()
    */

    let filterCenaKvalitet=proizvodi.filter(proizvod=>{
        return proizvod.tip==='sport' && proizvod.kvalitet>0 && proizvod.cena<15;
    }

    );
    console.log(filterCenaKvalitet);
    console.log('------------------Sledeci primer------------------');


    /*
        9. primer - filter prema ID-ju
    */

    let tema={id:2224,naslov:'sportska vest'};

    let komentari=[
        {temaId: 2224, sadrzaj:'odlican tekst'},
        {temaId: 1113, sadrzaj:'los tekst'},
        {temaId: 2224, sadrzaj:'ok'}
    ];


    function komentariTeme(tema, komentari){
        return komentari.filter(komentar=>komentar.temaId===tema.id);
    }
    console.log(komentariTeme(tema, komentari));
    console.log('------------------Vanila js------------------');

    /*
        10. primer - 
            - find()
            - problem:
    */

    let korisnici=[
        {ime: 'Marko', id:1},
        {ime: 'Ana'},
        {ime: 'Nikola'},
        {ime: 'Marko', id:4}
    ];

    //vanila js
    var korisnik;
    for(var i=0;i<korisnici.length;i++){
        if(korisnici[i].ime==='Marko'){
            korisnik=korisnici[i];
            break;
        }

    }
    console.log(korisnik);

    console.log('------------------TypeScript------------------');

    console.log(korisnici.find(korisnik=>korisnik.ime==='Marko'));
 
    


    </script>

</body>
</html>